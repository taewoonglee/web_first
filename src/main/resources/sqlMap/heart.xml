<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.naver.user.dao.HeartMapper">
    <!--    <insert id="insertContent" useGeneratedKeys="true"-->
    <!--            keyProperty="id">-->
    <!--        insert into todos(username,password,name)-->
    <!--        values(#{id},#{pw},#{name})-->
    <!--    </insert>-->

    <select id="findById" resultType="int">

        select count(*) from hearts where tid=#{tid} and uid = #{uid};
    </select>

    <insert id="updateHeart">
        <choose>
            <when test="result == 0">
                insert into hearts (uid, tid) values (#{uid}, #{tid});
            </when>
            <otherwise>
                delete from hearts where uid = #{uid} and tid = #{tid};
            </otherwise>
        </choose>

    </insert>
    <update id="updateHearts">
        update todos
        set heart=
        <choose>
            <when test="result == 0">
                heart +1
            </when>
            <otherwise>

            </otherwise>
        </choose>
    </update>

</mapper>